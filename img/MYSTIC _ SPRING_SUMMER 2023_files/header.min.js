var tpWidgetsPixelBlocked=!0;!async function(){if(!0===window.tpHeaderLoaded)return;window.tpHeaderLoaded=!0;const t="//ecommplugins-reviewsapp.trustpilot.com",e="//ecommplugins-trustboxpreview.trustpilot.com/v1.0/trustboxpreview.min.js",o="//ecommplugins-scripts.trustpilot.com/v2.1/css/preview.min.css",n="TRUSTPILOT_SKU_VALUE_";function r(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}const i=new URL(document.currentScript.src),s=i.searchParams?i.searchParams.get("settings"):void 0,c=i.searchParams?i.searchParams.get("shop"):"https://admin.shopify.com",p=s?JSON.parse((d=s,decodeURIComponent(Array.prototype.map.call(atob(d),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))):{};var d;"undefined"==typeof TrustpilotObject&&function(t,e,o,n,r){t.TrustpilotObject=r,t.tp=t.tp||function(){(t.tp.q=t.tp.q||[]).push(arguments)},a=e.createElement(o),a.async=1,a.src="https://invitejs.trustpilot.com/tp.min.js",a.type="text/java"+o,f=e.getElementsByTagName(o)[0],f.parentNode.insertBefore(a,f)}(window,document,"script",0,"tp"),tp("register",p.key);const u=new CustomEvent("trustpilotScriptLoaded");if(dispatchEvent(u),function(t){return!(!t||!t.searchParams||"true"!==t.searchParams.get("tpTrustBoxPreview"))}(new URL(window.location.href))){document.body.style.paddingTop="75px";var l=document.createElement("script");if(l.type="text/javascript",l.src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js",l.async=!0,document.head.appendChild(l),"undefined"==typeof TrustpilotPreview)try{var m=document.createElement("script");m.type="text/javascript",m.src="//ecommplugins-scripts.trustpilot.com/v2.1/js/preview_shopify.js",m.onload=function(e){const a=document.createElement("iframe");a.id="pixel_iframe",a.src=`${t}/pixel/index.html?shop=${c}`,a.setAttribute("style","display: none; width: 1px; height: 1px;"),a.onload=function(e){document.getElementById("pixel_iframe").contentWindow.postMessage(JSON.stringify({basis:"iframe",action:"initialLoad"}),"https:"+t)},document.body.appendChild(a)},document.head.appendChild(m)}catch(u){console.log("TrustpilotPreview couldn't load")}window.addEventListener("message",function(a){var n=new URL(window.location).hostname,i=new URL(a.origin).hostname,s=-1===a.origin.indexOf(n),c=n!==i;if(s!==c&&console.log(`Origin missmatch: old condition result: ${s}, new condition result: ${c}`),a.data&&(!c||a.origin==="https:"+t)&&"undefined"!=typeof TrustpilotPreview)if("string"==typeof a.data&&"submit"===a.data)TrustpilotPreview.sendTrustboxes();else if("string"==typeof a.data){try{jsonData=JSON.parse(a.data)}catch(t){return}jsonData.trustbox?TrustpilotPreview.setSettings(jsonData.trustbox):"updatePageUrls"===jsonData.type||"newTrustBox"===jsonData.type||"deletePageTrustBoxes"===jsonData.type?TrustpilotPreview.sendDataTransfer(a.data):"loadCategoryProductInfo"===jsonData.type?function(){const t=$("a.product").toArray().map(t=>t.href.split("/").pop());return Promise.all(t.map(t=>new Promise((e,a)=>{Shopify.getProduct(t,e)}))).then(t=>{const e=h(),a=t.map(t=>({productUrl:t.url,id:t.id.toString(),variationIds:t.variants.map(t=>t.id.toString()),variationSkus:t.variants.map(t=>t[e]),name:t.title}));return a})}().then(t=>{window.postMessage(JSON.stringify(t),window.origin)}):jsonData.customised?TrustpilotPreview.updateActive(jsonData.customised):jsonData.loadData&&async function(t){var a=document.createElement("div");a.id="trustpilot_initial_data",a.setAttribute("data-page-urls",r(JSON.stringify(t.loadData.trustbox.pageUrls))),a.setAttribute("data-custom-trustboxes",t.loadData.customTrustBoxes),a.setAttribute("data-settings",r(JSON.stringify(t.loadData))),a.setAttribute("id","trustpilot-trustbox-preview"),a.setAttribute("data-source","Shopify"),a.setAttribute("data-sku","product"===v()?await y(p.s):""),document.body.appendChild(a);var n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!0,n.onload=function(){const e=JSON.stringify({basis:"iframe",TrustBoxPreviewMode:{integrationKey:p.key},enable:!0,widgets:t.widgets});window.postMessage(e,window.origin)},document.head.appendChild(n),tpWidgetsPixelBlocked=!1,TrustpilotPreview.init([o],t.loadData.trustbox,window,document.getElementById("pixel_iframe").contentWindow)}(jsonData)}})}else"undefined"!=typeof trustpilot_trustbox_settings?await x():addEventListener("trustpilotTrustboxSettingsLoaded",async function(){await x()});async function g(t){var e=(await y(t)).join(","),a=function(){var t=ShopifyAnalytics&&ShopifyAnalytics.meta||t;if(t&&t.product&&t.product.variants&&t.product.variants.length>0){var e=t.product.variants;if(t.product.selectedVariantId)for(var a=0;a<e.length;a++)if(e[a].id==t.product.selectedVariantId)return e[a].name;return e[0].name}}();for(var o in trustpilot_trustbox_settings.trustboxes)trustpilot_trustbox_settings.trustboxes[o].sku=e,trustpilot_trustbox_settings.trustboxes[o].name=a}async function y(t){var e=[];if("sku"===(t=h(t))&&meta&&meta.product&&meta.product.variants)w(e,t,meta.product);else try{w(e,t,(await new Promise((t,e)=>{const a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState&&200==a.status)try{t(JSON.parse(a.response))}catch(t){e()}},a.open("GET",window.location.href,!0),a.setRequestHeader("Accept","application/json"),a.send(null)})).product)}catch(t){}return e}function w(t,e,a){t.push(`${n}${a.id}`);var o=a.variants;for(var r in o)t.push(`${n}${o[r].id}`),o[r][e]&&t.push(o[r][e])}function h(t){return t||(t="sku"),t.toLowerCase()}function v(){const t=document.head.querySelector("[property~='og:type'][content]"),e=t?t.content:"",a=location.pathname;if(meta&&meta.page&&"home"===meta.page.pageType||"/"===location.pathname)return"landing";if(meta&&meta.page&&"collection"===meta.page.pageType||"product.group"===e||/^\/collections(\/[a-z0-9-_]+\/?$)?\/?$/.test(a))return"category";return meta&&meta.page&&"product"===meta.page.pageType||meta&&void 0!==meta.product||"product"===e||/^\/(collections\/[a-z0-9-_]+\/)?products\/[a-z0-9-_]+\/?$/.test(a)?"product":void 0}async function x(){const t=v();if("product"===t){const t=p.s;await g(t)}trustpilot_trustbox_settings.trustboxes=trustpilot_trustbox_settings.trustboxes.filter(function(e){return t===e.page||b(e.page)===b(location.origin+location.pathname)||e.page.toLowerCase()===btoa(location.origin+location.pathname).toLowerCase()}),tp("trustBox",trustpilot_trustbox_settings)}function b(t){return"string"==typeof t?t.replace(/\/+$/,""):t}}();
//# sourceMappingURL=header.min.js.map
